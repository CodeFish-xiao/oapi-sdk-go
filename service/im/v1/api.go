// Package im code generated by oapi sdk gen
package larkim

import (
	"bytes"
	"context"
	"net/http"

	"github.com/larksuite/oapi-sdk-go/core"
)

// 构建业务域服务实例
func NewService(httpClient *http.Client, config *core.Config) *ImService {
	i := &ImService{httpClient: httpClient, config: config}
	i.BatchMessage = &batchMessage{service: i}
	i.Chat = &chat{service: i}
	i.ChatAnnouncement = &chatAnnouncement{service: i}
	i.ChatManagers = &chatManagers{service: i}
	i.ChatMemberBot = &chatMemberBot{service: i}
	i.ChatMemberUser = &chatMemberUser{service: i}
	i.ChatMembers = &chatMembers{service: i}
	i.ChatModeration = &chatModeration{service: i}
	i.ChatTopNotice = &chatTopNotice{service: i}
	i.File = &file{service: i}
	i.Image = &image{service: i}
	i.Message = &message{service: i}
	i.MessageReaction = &messageReaction{service: i}
	i.MessageResource = &messageResource{service: i}
	return i
}

// 业务域服务定义
type ImService struct {
	httpClient       *http.Client
	config           *core.Config
	BatchMessage     *batchMessage
	Chat             *chat
	ChatAnnouncement *chatAnnouncement
	ChatManagers     *chatManagers
	ChatMemberBot    *chatMemberBot
	ChatMemberUser   *chatMemberUser
	ChatMembers      *chatMembers
	ChatModeration   *chatModeration
	ChatTopNotice    *chatTopNotice
	File             *file
	Image            *image
	Message          *message
	MessageReaction  *messageReaction
	MessageResource  *messageResource
}

// 资源服务定义
type batchMessage struct {
	service *ImService
}
type chat struct {
	service *ImService
}
type chatAnnouncement struct {
	service *ImService
}
type chatManagers struct {
	service *ImService
}
type chatMemberBot struct {
	service *ImService
}
type chatMemberUser struct {
	service *ImService
}
type chatMembers struct {
	service *ImService
}
type chatModeration struct {
	service *ImService
}
type chatTopNotice struct {
	service *ImService
}
type file struct {
	service *ImService
}
type image struct {
	service *ImService
}
type message struct {
	service *ImService
}
type messageReaction struct {
	service *ImService
}
type messageResource struct {
	service *ImService
}

// 资源服务方法定义
func (b *batchMessage) Delete(ctx context.Context, req *DeleteBatchMessageReq, options ...core.RequestOptionFunc) (*DeleteBatchMessageResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, b.service.config, http.MethodDelete,
		"/open-apis/im/v1/batch_messages/:batch_message_id", []core.AccessTokenType{core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &DeleteBatchMessageResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (b *batchMessage) GetProgress(ctx context.Context, req *GetProgressBatchMessageReq, options ...core.RequestOptionFunc) (*GetProgressBatchMessageResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, b.service.config, http.MethodGet,
		"/open-apis/im/v1/batch_messages/:batch_message_id/get_progress", []core.AccessTokenType{core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &GetProgressBatchMessageResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (b *batchMessage) ReadUser(ctx context.Context, req *ReadUserBatchMessageReq, options ...core.RequestOptionFunc) (*ReadUserBatchMessageResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, b.service.config, http.MethodGet,
		"/open-apis/im/v1/batch_messages/:batch_message_id/read_user", []core.AccessTokenType{core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &ReadUserBatchMessageResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chat) Create(ctx context.Context, req *CreateChatReq, options ...core.RequestOptionFunc) (*CreateChatResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodPost,
		"/open-apis/im/v1/chats", []core.AccessTokenType{core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &CreateChatResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chat) Delete(ctx context.Context, req *DeleteChatReq, options ...core.RequestOptionFunc) (*DeleteChatResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodDelete,
		"/open-apis/im/v1/chats/:chat_id", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &DeleteChatResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chat) Get(ctx context.Context, req *GetChatReq, options ...core.RequestOptionFunc) (*GetChatResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodGet,
		"/open-apis/im/v1/chats/:chat_id", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &GetChatResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chat) List(ctx context.Context, req *ListChatReq, options ...core.RequestOptionFunc) (*ListChatResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodGet,
		"/open-apis/im/v1/chats", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &ListChatResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chat) ListChat(ctx context.Context, req *ListChatReq, options ...core.RequestOptionFunc) (*ListChatIterator, error) {
	return &ListChatIterator{
		ctx:      ctx,
		req:      req,
		listFunc: c.List,
		options:  options,
		limit:    req.Limit}, nil
}
func (c *chat) Search(ctx context.Context, req *SearchChatReq, options ...core.RequestOptionFunc) (*SearchChatResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodGet,
		"/open-apis/im/v1/chats/search", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &SearchChatResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chat) SearchChat(ctx context.Context, req *SearchChatReq, options ...core.RequestOptionFunc) (*SearchChatIterator, error) {
	return &SearchChatIterator{
		ctx:      ctx,
		req:      req,
		listFunc: c.Search,
		options:  options,
		limit:    req.Limit}, nil
}
func (c *chat) Update(ctx context.Context, req *UpdateChatReq, options ...core.RequestOptionFunc) (*UpdateChatResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodPut,
		"/open-apis/im/v1/chats/:chat_id", []core.AccessTokenType{core.AccessTokenTypeTenant, core.AccessTokenTypeUser}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &UpdateChatResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chatAnnouncement) Get(ctx context.Context, req *GetChatAnnouncementReq, options ...core.RequestOptionFunc) (*GetChatAnnouncementResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodGet,
		"/open-apis/im/v1/chats/:chat_id/announcement", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &GetChatAnnouncementResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chatAnnouncement) Patch(ctx context.Context, req *PatchChatAnnouncementReq, options ...core.RequestOptionFunc) (*PatchChatAnnouncementResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodPatch,
		"/open-apis/im/v1/chats/:chat_id/announcement", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &PatchChatAnnouncementResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chatManagers) AddManagers(ctx context.Context, req *AddManagersChatManagersReq, options ...core.RequestOptionFunc) (*AddManagersChatManagersResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodPost,
		"/open-apis/im/v1/chats/:chat_id/managers/add_managers", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &AddManagersChatManagersResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chatManagers) DeleteManagers(ctx context.Context, req *DeleteManagersChatManagersReq, options ...core.RequestOptionFunc) (*DeleteManagersChatManagersResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodPost,
		"/open-apis/im/v1/chats/:chat_id/managers/delete_managers", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &DeleteManagersChatManagersResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chatMembers) Create(ctx context.Context, req *CreateChatMembersReq, options ...core.RequestOptionFunc) (*CreateChatMembersResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodPost,
		"/open-apis/im/v1/chats/:chat_id/members", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &CreateChatMembersResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chatMembers) Delete(ctx context.Context, req *DeleteChatMembersReq, options ...core.RequestOptionFunc) (*DeleteChatMembersResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodDelete,
		"/open-apis/im/v1/chats/:chat_id/members", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &DeleteChatMembersResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chatMembers) Get(ctx context.Context, req *GetChatMembersReq, options ...core.RequestOptionFunc) (*GetChatMembersResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodGet,
		"/open-apis/im/v1/chats/:chat_id/members", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &GetChatMembersResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chatMembers) GetChatMembers(ctx context.Context, req *GetChatMembersReq, options ...core.RequestOptionFunc) (*GetChatMembersIterator, error) {
	return &GetChatMembersIterator{
		ctx:      ctx,
		req:      req,
		listFunc: c.Get,
		options:  options,
		limit:    req.Limit}, nil
}
func (c *chatMembers) IsInChat(ctx context.Context, req *IsInChatChatMembersReq, options ...core.RequestOptionFunc) (*IsInChatChatMembersResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodGet,
		"/open-apis/im/v1/chats/:chat_id/members/is_in_chat", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &IsInChatChatMembersResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chatMembers) MeJoin(ctx context.Context, req *MeJoinChatMembersReq, options ...core.RequestOptionFunc) (*MeJoinChatMembersResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodPatch,
		"/open-apis/im/v1/chats/:chat_id/members/me_join", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &MeJoinChatMembersResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chatModeration) Get(ctx context.Context, req *GetChatModerationReq, options ...core.RequestOptionFunc) (*GetChatModerationResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodGet,
		"/open-apis/im/v1/chats/:chat_id/moderation", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &GetChatModerationResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chatModeration) GetChatModeration(ctx context.Context, req *GetChatModerationReq, options ...core.RequestOptionFunc) (*GetChatModerationIterator, error) {
	return &GetChatModerationIterator{
		ctx:      ctx,
		req:      req,
		listFunc: c.Get,
		options:  options,
		limit:    req.Limit}, nil
}
func (c *chatModeration) Update(ctx context.Context, req *UpdateChatModerationReq, options ...core.RequestOptionFunc) (*UpdateChatModerationResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodPut,
		"/open-apis/im/v1/chats/:chat_id/moderation", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &UpdateChatModerationResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chatTopNotice) DeleteTopNotice(ctx context.Context, req *DeleteTopNoticeChatTopNoticeReq, options ...core.RequestOptionFunc) (*DeleteTopNoticeChatTopNoticeResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodPost,
		"/open-apis/im/v1/chats/:chat_id/top_notice/delete_top_notice", []core.AccessTokenType{core.AccessTokenTypeTenant, core.AccessTokenTypeUser}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &DeleteTopNoticeChatTopNoticeResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (c *chatTopNotice) PutTopNotice(ctx context.Context, req *PutTopNoticeChatTopNoticeReq, options ...core.RequestOptionFunc) (*PutTopNoticeChatTopNoticeResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, c.service.config, http.MethodPost,
		"/open-apis/im/v1/chats/:chat_id/top_notice/put_top_notice", []core.AccessTokenType{core.AccessTokenTypeTenant, core.AccessTokenTypeUser}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &PutTopNoticeChatTopNoticeResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (f *file) Create(ctx context.Context, req *CreateFileReq, options ...core.RequestOptionFunc) (*CreateFileResp, error) {
	options = append(options, core.WithFileUpload())
	// 发起请求
	rawResp, err := core.SendRequest(ctx, f.service.config, http.MethodPost,
		"/open-apis/im/v1/files", []core.AccessTokenType{core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &CreateFileResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (f *file) Get(ctx context.Context, req *GetFileReq, options ...core.RequestOptionFunc) (*GetFileResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, f.service.config, http.MethodGet,
		"/open-apis/im/v1/files/:file_key", []core.AccessTokenType{core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &GetFileResp{RawResponse: rawResp}
	// 如果是下载，则设置响应结果
	if rawResp.StatusCode == http.StatusOK {
		resp.File = bytes.NewBuffer(rawResp.RawBody)
		resp.FileName = core.FileNameByHeader(rawResp.Header)
		return resp, err
	}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (i *image) Create(ctx context.Context, req *CreateImageReq, options ...core.RequestOptionFunc) (*CreateImageResp, error) {
	options = append(options, core.WithFileUpload())
	// 发起请求
	rawResp, err := core.SendRequest(ctx, i.service.config, http.MethodPost,
		"/open-apis/im/v1/images", []core.AccessTokenType{core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &CreateImageResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (i *image) Get(ctx context.Context, req *GetImageReq, options ...core.RequestOptionFunc) (*GetImageResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, i.service.config, http.MethodGet,
		"/open-apis/im/v1/images/:image_key", []core.AccessTokenType{core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &GetImageResp{RawResponse: rawResp}
	// 如果是下载，则设置响应结果
	if rawResp.StatusCode == http.StatusOK {
		resp.File = bytes.NewBuffer(rawResp.RawBody)
		resp.FileName = core.FileNameByHeader(rawResp.Header)
		return resp, err
	}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (m *message) Create(ctx context.Context, req *CreateMessageReq, options ...core.RequestOptionFunc) (*CreateMessageResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, m.service.config, http.MethodPost,
		"/open-apis/im/v1/messages", []core.AccessTokenType{core.AccessTokenTypeTenant, core.AccessTokenTypeUser}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &CreateMessageResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (m *message) Delete(ctx context.Context, req *DeleteMessageReq, options ...core.RequestOptionFunc) (*DeleteMessageResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, m.service.config, http.MethodDelete,
		"/open-apis/im/v1/messages/:message_id", []core.AccessTokenType{core.AccessTokenTypeTenant, core.AccessTokenTypeUser}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &DeleteMessageResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (m *message) Get(ctx context.Context, req *GetMessageReq, options ...core.RequestOptionFunc) (*GetMessageResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, m.service.config, http.MethodGet,
		"/open-apis/im/v1/messages/:message_id", []core.AccessTokenType{core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &GetMessageResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (m *message) List(ctx context.Context, req *ListMessageReq, options ...core.RequestOptionFunc) (*ListMessageResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, m.service.config, http.MethodGet,
		"/open-apis/im/v1/messages", []core.AccessTokenType{core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &ListMessageResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (m *message) ListMessage(ctx context.Context, req *ListMessageReq, options ...core.RequestOptionFunc) (*ListMessageIterator, error) {
	return &ListMessageIterator{
		ctx:      ctx,
		req:      req,
		listFunc: m.List,
		options:  options,
		limit:    req.Limit}, nil
}
func (m *message) Patch(ctx context.Context, req *PatchMessageReq, options ...core.RequestOptionFunc) (*PatchMessageResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, m.service.config, http.MethodPatch,
		"/open-apis/im/v1/messages/:message_id", []core.AccessTokenType{core.AccessTokenTypeTenant, core.AccessTokenTypeUser}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &PatchMessageResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (m *message) ReadUsers(ctx context.Context, req *ReadUsersMessageReq, options ...core.RequestOptionFunc) (*ReadUsersMessageResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, m.service.config, http.MethodGet,
		"/open-apis/im/v1/messages/:message_id/read_users", []core.AccessTokenType{core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &ReadUsersMessageResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (m *message) Reply(ctx context.Context, req *ReplyMessageReq, options ...core.RequestOptionFunc) (*ReplyMessageResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, m.service.config, http.MethodPost,
		"/open-apis/im/v1/messages/:message_id/reply", []core.AccessTokenType{core.AccessTokenTypeTenant, core.AccessTokenTypeUser}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &ReplyMessageResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (m *message) UrgentApp(ctx context.Context, req *UrgentAppMessageReq, options ...core.RequestOptionFunc) (*UrgentAppMessageResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, m.service.config, http.MethodPatch,
		"/open-apis/im/v1/messages/:message_id/urgent_app", []core.AccessTokenType{core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &UrgentAppMessageResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (m *message) UrgentPhone(ctx context.Context, req *UrgentPhoneMessageReq, options ...core.RequestOptionFunc) (*UrgentPhoneMessageResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, m.service.config, http.MethodPatch,
		"/open-apis/im/v1/messages/:message_id/urgent_phone", []core.AccessTokenType{core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &UrgentPhoneMessageResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (m *message) UrgentSms(ctx context.Context, req *UrgentSmsMessageReq, options ...core.RequestOptionFunc) (*UrgentSmsMessageResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, m.service.config, http.MethodPatch,
		"/open-apis/im/v1/messages/:message_id/urgent_sms", []core.AccessTokenType{core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &UrgentSmsMessageResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (m *messageReaction) Create(ctx context.Context, req *CreateMessageReactionReq, options ...core.RequestOptionFunc) (*CreateMessageReactionResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, m.service.config, http.MethodPost,
		"/open-apis/im/v1/messages/:message_id/reactions", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &CreateMessageReactionResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (m *messageReaction) Delete(ctx context.Context, req *DeleteMessageReactionReq, options ...core.RequestOptionFunc) (*DeleteMessageReactionResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, m.service.config, http.MethodDelete,
		"/open-apis/im/v1/messages/:message_id/reactions/:reaction_id", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &DeleteMessageReactionResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (m *messageReaction) List(ctx context.Context, req *ListMessageReactionReq, options ...core.RequestOptionFunc) (*ListMessageReactionResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, m.service.config, http.MethodGet,
		"/open-apis/im/v1/messages/:message_id/reactions", []core.AccessTokenType{core.AccessTokenTypeUser, core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &ListMessageReactionResp{RawResponse: rawResp}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
func (m *messageReaction) ListMessageReaction(ctx context.Context, req *ListMessageReactionReq, options ...core.RequestOptionFunc) (*ListMessageReactionIterator, error) {
	return &ListMessageReactionIterator{
		ctx:      ctx,
		req:      req,
		listFunc: m.List,
		options:  options,
		limit:    req.Limit}, nil
}
func (m *messageResource) Get(ctx context.Context, req *GetMessageResourceReq, options ...core.RequestOptionFunc) (*GetMessageResourceResp, error) {
	// 发起请求
	rawResp, err := core.SendRequest(ctx, m.service.config, http.MethodGet,
		"/open-apis/im/v1/messages/:message_id/resources/:file_key", []core.AccessTokenType{core.AccessTokenTypeTenant}, req, options...)
	if err != nil {
		return nil, err
	}
	// 反序列响应结果
	resp := &GetMessageResourceResp{RawResponse: rawResp}
	// 如果是下载，则设置响应结果
	if rawResp.StatusCode == http.StatusOK {
		resp.File = bytes.NewBuffer(rawResp.RawBody)
		resp.FileName = core.FileNameByHeader(rawResp.Header)
		return resp, err
	}
	err = rawResp.JSONUnmarshalBody(resp)
	if err != nil {
		return nil, err
	}
	return resp, err
}
